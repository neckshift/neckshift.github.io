<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NeckShift – Comments</title>
<link rel="icon" type="image/png" href="/favicon.png">

<style>
  :root{
    --fg:#E9E3E3;--muted:#B3A8A8;--line:rgba(255,255,255,.14);
    --bg:#121212;--glass:rgba(28,28,28,.65);--glass2:rgba(24,24,24,.85);
    --green:#6ef0a8;--blue:#7fb7ff;--red:#ff8c8c;
    --devBubble:#153a2b; --userBubble:#262626;
    --badge:#2a2a2a;--badgeText:#d6d6d6;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg);scrollbar-width:none}
  ::-webkit-scrollbar{width:0;height:0}
  .background{position:fixed;inset:0;z-index:-1;overflow:hidden}
  .background img{width:100%;height:100%;object-fit:cover;filter:brightness(.28)}
  .wrap{max-width:920px;margin:28px auto;padding:0 16px}
  /* Sticky uniquement pour l'entête + onglets */
  .sticky{position:sticky;top:0;z-index:10;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);background:var(--glass2);border:1px solid var(--line);border-radius:16px}
  .head{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;border-bottom:1px solid var(--line)}
  h2{margin:0;font-size:20px;color:#e8dfdf;font-weight:600}
  .btn,.btn-small{border:1px solid rgba(255,255,255,.3);background:none;color:var(--muted);border-radius:8px;cursor:pointer;transition:.2s}
  .btn{padding:10px 12px;font-size:15px}.btn-small{padding:6px 9px;font-size:13px}
  .btn:hover{background:#3d3d3d;color:#fff}
  #adminPanel{display:none;gap:8px;align-items:center}
  #adminPanel input{background:transparent;border:1px solid rgba(255,255,255,.25);color:#eee;border-radius:8px;padding:7px 9px}
  .tabs{display:flex;gap:8px;padding:10px 12px;flex-wrap:wrap}
  .tab{padding:8px 12px;border-radius:10px;border:1px solid var(--line);color:#cfc7c7;cursor:pointer;background:rgba(255,255,255,.02)}
  .tab[data-topic="thanks"].active{color:#111;background:var(--green);border-color:var(--green)}
  .tab[data-topic="feature"].active{color:#111;background:var(--blue);border-color:var(--blue)}
  .tab[data-topic="bug"].active{color:#111;background:var(--red);border-color:var(--red)}
  .panel{margin-top:14px;background:var(--glass);border:1px solid var(--line);border-radius:16px}
  .form{padding:12px;border-bottom:1px solid var(--line)}
  .row{display:grid;grid-template-columns:1fr;gap:10px}
  input[type="text"],textarea{background:rgba(44,44,44,.35);border:1px solid rgba(255,255,255,.25);color:#eee;padding:10px 12px;border-radius:10px;font-size:15px}
  textarea{width:100%;min-height:100px;resize:vertical}
  .post-btn{margin-top:4px}
  .list{padding:6px 12px}
  .thread{border-bottom:1px solid var(--line);background:rgba(255,255,255,.02)}
  .thread:nth-child(odd){background:rgba(0,0,0,.18)}
  .thread-head{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:14px 10px;}
  .thread-head.clickable{cursor:pointer}
  .meta{font-size:13px;color:#b6b6b6}
  .name{font-weight:600;color:#f0eded;font-style:italic;font-size:1.06rem}
  .time{color:#9e9e9e;margin-left:8px}
  .preview{color:#ddd;opacity:.9;margin-top:4px;max-width:70ch;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .count-badge{margin-left:auto; background:var(--badge); color:var(--badgeText);border:1px solid rgba(255,255,255,.2); border-radius:999px;padding:3px 10px; font-size:12px; white-space:nowrap;}
  .chev{margin-left:10px;opacity:.7;transition:.2s}
  .thread.open .chev{transform:rotate(90deg);opacity:1}
  .thread-body{display:none;padding:0 10px 12px}
  .thread.open .thread-body{display:block}
  /* Bulles “SMS” partout, largeur fixe ~78% */
  .bubble-row{display:flex;width:100%;margin-top:8px}
  .bubble-row.user{justify-content:flex-start}
  .bubble-row.dev{justify-content:flex-end}
  .bubble{width:78%;padding:8px 10px;border-radius:14px;line-height:1.4;font-size:15px;box-shadow:0 0 0 1px rgba(255,255,255,.06) inset;word-wrap:break-word;overflow-wrap:anywhere;}
  .bubble.user{background:var(--userBubble)}
  .bubble.dev{background:var(--devBubble);border:1px solid rgba(110,240,168,.25)}
  .who{display:block;margin-bottom:3px;font-style:italic;font-size:1.04rem;opacity:.95}
  .actions{display:flex;gap:6px;margin-top:10px}
  .inlinebox{display:none;margin-top:8px}
  .inlinebox textarea{width:100%;min-height:72px}
  .inlinebox .row2{display:flex;gap:8px;align-items:center;margin-top:6px}
  .inlinebox input[type="text"]{width:200px}
</style>
</head>
<body>
  <div class="background"><img src="../createbackground.png" alt=""></div>
  <div class="wrap">
    <!-- STICKY: header + tabs -->
    <div class="sticky">
      <div class="head">
        <h2>Comments</h2>
        <div style="display:flex; gap:10px; align-items:center;">
          <button id="adminToggle" class="btn-small" title="Enter admin password">Admin mode</button>
          <div id="adminPanel">
            <input id="adminPassword" type="password" placeholder="Admin password" autocomplete="off" />
            <button id="adminUse" class="btn-small">Use</button>
            <button id="adminCancel" class="btn-small">Cancel</button>
          </div>
        </div>
      </div>
      <div class="tabs">
        <button class="tab active" data-topic="thanks">Thanks</button>
        <button class="tab" data-topic="feature">Feature request</button>
        <button class="tab" data-topic="bug">Bug report</button>
      </div>
    </div>
    <!-- NON-sticky : le panel (form + liste) défile avec les messages -->
    <div class="panel">
      <div class="form">
        <div class="row">
          <input type="text" id="name" placeholder="Your name (optional)" maxlength="40">
          <textarea id="message" placeholder="Write your comment..." maxlength="1500" required></textarea>
          <button id="postBtn" class="btn post-btn">Post comment</button>
          <div id="status" style="margin-top:6px;font-size:14px;color:#d9bebe"></div>
        </div>
      </div>
      <div id="list" class="list"></div>
    </div>
  </div>
<script>
  /* ... tout ton JS reste inchangé ... */
</script>
</body>
</html>
